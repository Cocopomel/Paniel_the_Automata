<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <!--
  [모듈 목록]

  근접 버프
  사격 버프
  의료 버프
  생산 버프
  농업 버프
  채굴 버프
  -->

  <!--==================================== 전투 지휘 모듈 ====================================-->

  <HediffDef ParentName="RoleStatBuff">
    <defName>PN_OfficerCommand</defName>
    <label>module active (officer)</label>
    <description>By encouraging and commanding nearby allies, this person can enhance their focus in combat and thus their battle performance.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <showRemainingTime>True</showRemainingTime>
      </li>
      <li Class="HediffCompProperties_DisappearsOnDeath"/>
      <li Class="HediffCompProperties_GiveHediffsInRange">
        <range>9.9</range>
        <mote>Mote_CombatCommand</mote>
        <hideMoteWhenNotDrafted>true</hideMoteWhenNotDrafted>
        <targetingParameters>
          <canTargetBuildings>false</canTargetBuildings>
          <canTargetAnimals>false</canTargetAnimals>
          <canTargetMechs>false</canTargetMechs>
          <onlyTargetColonists>true</onlyTargetColonists>
        </targetingParameters>
        <hediff>PN_OfficerCommandBuff</hediff>
      </li>
      <li Class="MoharHediffs.HediffCompProperties_PostRemoveTrigger_HediffAdd">
        <triggeredHediff>
          <li>PN_OfficerCommandOverload</li>
        </triggeredHediff>
      </li>
    </comps>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.40</offset>
          </li>
        </capMods>
        <statOffsets>

        </statOffsets>
        <statFactors>

        </statFactors>
      </li>
    </stages>
    <isBad>false</isBad>
  </HediffDef>

  <ThingDef ParentName="MoteBase">
    <defName>PN_Mote_OfficerCommandBuff</defName>
    <thingClass>MoteAttached</thingClass>
    <mote>
      <fadeInTime>5</fadeInTime>
      <solidTime>5</solidTime>
      <fadeOutTime>15</fadeOutTime>
      <needsMaintenance>True</needsMaintenance>
    </mote>
    <graphicData>
      <texPath>Things/Mote/PNOfficerCommandBuff</texPath>
      <shaderType>MoteProximityScannerRadius</shaderType>
      <color>(1, 0.1, 0.1, 0.35)</color>
      <drawOffset>(0,0,0.5)</drawOffset>
      <drawSize>1</drawSize>
      <shaderParameters>
        <_smokeScrollSpeed>0.1</_smokeScrollSpeed>
        <_rotationSpeed>0.05</_rotationSpeed>
        <_smokeAmount>0.1</_smokeAmount>
        <!--<_MainTex>/Things/Mote/PNOfficerCommandBuff</_MainTex>
        <_ScanTex>/Things/Mote/PNOfficerCommandBuff</_ScanTex>
        <_SmokeTex>/Things/Mote/PNOfficerCommandBuff</_SmokeTex>-->
      </shaderParameters>
    </graphicData>
  </ThingDef>

  <HediffDef ParentName="RoleStatBuff">
    <defName>PN_OfficerCommandBuff</defName>
    <label>officer command</label>
    <description>Combat abilities are boosted thanks to being near someone who is using the officer command ability.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <showRemainingTime>false</showRemainingTime>
      </li>
      <li Class="HediffCompProperties_DisappearsOnDeath"/>
      <li Class="HediffCompProperties_Link">
        <requireLinkOnOtherPawn>false</requireLinkOnOtherPawn>
        <maxDistance>10</maxDistance>
        <customMote>Mote_CombatCommandLinkLine</customMote>
      </li>
    </comps>
    <isBad>false</isBad>
    <stages>
      <li>
        <statOffsets>
          <ShootingAccuracyPawn>2</ShootingAccuracyPawn>
        </statOffsets>
        <statFactors>
          <AimingDelayFactor>0.80</AimingDelayFactor>
        </statFactors>
      </li>
    </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>PN_OfficerCommandThought</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>PN_OfficerCommandBuff</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <label>command from automaton</label>
        <description>I can't believe I have to follow the command of automaton.</description>
        <baseMoodEffect>-5</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>

  <ThoughtDef>
    <defName>PN_OfficerCommandThoughtforPN</defName>
    <workerClass>MoharThoughts.RaceBPHediff</workerClass>
    <stages>
      <li>
        <label>command from officer</label>
        <description>officer is with me. we will be able to win this battle under officer command.</description>
        <baseMoodEffect>5</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>

  <MoharThoughts.MTWDef>
    <defName>PNMTW_OfficerCommandThoughtforPN</defName>
    <thought>PN_OfficerCommandThoughtforPN</thought>
    <race>Paniel_Race</race>
    <hediff>PN_OfficerCommandBuff</hediff>
    <bodyPart>PNBrain</bodyPart>
    <bpNum>1</bpNum>
  </MoharThoughts.MTWDef>

  <HediffDef>
    <defName>PN_OfficerCommandOverload</defName>
    <label>module overloaded</label>
    <labelNoun>module overloaded</labelNoun>
    <description>module overloaded</description>
    <hediffClass>HediffWithComps</hediffClass>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>40000</disappearsAfterTicks>
        <showRemainingTime>True</showRemainingTime>
      </li>
      <li Class="HediffCompProperties_DisappearsOnDeath"/>
    </comps>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.40</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>

</Defs>